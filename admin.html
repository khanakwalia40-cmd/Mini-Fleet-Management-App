<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fleet Management - Admin</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
    }

    /* Navbar */
    .navbar {
      background: #343a40;
      color: #ffffff;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .navbar h1 {
      font-size: 20px;
      margin-right: auto;
    }

    .navbar select,
    .navbar button {
      padding: 6px 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .navbar button {
      background: #dc3545;
      color: #ffffff;
      border: none;
      cursor: pointer;
    }

    .navbar button:hover {
      background: #b52a36;
    }

    /* Layout */
    .container {
      display: flex;
      padding: 16px;
      gap: 16px;
    }

    /* Sidebar form */
    .sidebar {
      width: 260px;
      background: #ffffff;
      padding: 16px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);
    }

    .sidebar h2 {
      font-size: 18px;
      margin-bottom: 12px;
    }

    .sidebar label {
      display: block;
      margin: 8px 0 4px;
      font-size: 14px;
    }

    .sidebar input,
    .sidebar select {
      width: 100%;
      padding: 6px 8px;
      margin-bottom: 6px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .sidebar button {
      width: 100%;
      padding: 8px;
      background: #28a745;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 8px;
    }

    .sidebar button:hover {
      background: #1f7e34;
    }

    /* Main cards area */
    .main {
      flex: 1;
    }

    .cards-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* 3 cards per row [web:23] */
      gap: 16px;
    }

    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .card img {
      width: 100%;
      max-width: 180px;
      border-radius: 4px;
      margin-bottom: 8px;
    }

    .card h3 {
      margin: 6px 0;
      font-size: 16px;
    }

    .card p {
      margin: 2px 0;
      font-size: 14px;
    }

    .status-available {
      color: #28a745;
      font-weight: bold;
    }

    .status-unavailable {
      color: #dc3545;
      font-weight: bold;
    }

    .card button {
      margin-top: 6px;
      width: 100%;
      padding: 6px;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      font-size: 13px;
    }

    .btn-update {
      background: #007bff;
      color: #ffffff;
    }

    .btn-availability {
      background: #ffc107;
      color: #000000;
    }

    .btn-delete {
      background: #dc3545;
      color: #ffffff;
    }

    .card button:hover {
      opacity: 0.9;
    }

    @media (max-width: 900px) {
      .cards-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 600px) {
      .container {
        flex-direction: column;
      }
      .cards-container {
        grid-template-columns: 1fr;
      }
      .sidebar {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <div class="navbar">
    <h1>Fleet Management Dashboard</h1>

    <label for="filterCategory" style="font-size:14px;">Category:</label>
    <select id="filterCategory">
      <option value="All">All</option>
      <option value="Auto">Auto</option>
      <option value="Car">Car</option>
      <option value="Truck">Truck</option>
      <option value="Bus">Bus</option>
    </select>

    <label for="filterAvailability" style="font-size:14px;">Availability:</label>
    <select id="filterAvailability">
      <option value="All">All</option>
      <option value="Available">Available</option>
      <option value="Unavailable">Unavailable</option>
    </select>

    <button id="clearFilterBtn">Clear Filter</button>
  </div>

  <!-- Main Layout -->
  <div class="container">
    <!-- Sidebar Form -->
    <div class="sidebar">
      <h2>Add Fleet</h2>

      <label for="regNo">Reg No of Vehicle</label>
      <input id="regNo" type="text" placeholder="e.g. MH12AB1234" />

      <label for="category">Category</label>
      <select id="category">
        <option value="">Select Category</option>
        <option value="Auto">Auto</option>
        <option value="Car">Car</option>
        <option value="Truck">Truck</option>
        <option value="Bus">Bus</option>
      </select>

      <label for="driverName">Driver Name</label>
      <input id="driverName" type="text" placeholder="Enter driver name" />

      <label for="availability">Is Available</label>
      <select id="availability">
        <option value="">Select Availability</option>
        <option value="Available">Available</option>
        <option value="Unavailable">Unavailable</option>
      </select>

      <button id="addFleetBtn">Add Fleet</button>
    </div>

    <!-- Main Content: Cards -->
    <div class="main">
      <div id="cardsContainer" class="cards-container">
        <!-- Cards will be rendered here -->
      </div>
    </div>
  </div>

  <script>
    // Data array to store vehicles
    var vehicles = [];
    var nextId = 1;

    // Filter variables
    var currentCategoryFilter = "All";
    var currentAvailabilityFilter = "All";

    // DOM elements
    var regNoInput = document.getElementById("regNo");
    var categorySelect = document.getElementById("category");
    var driverNameInput = document.getElementById("driverName");
    var availabilitySelect = document.getElementById("availability");
    var addFleetBtn = document.getElementById("addFleetBtn");

    var cardsContainer = document.getElementById("cardsContainer");

    var filterCategorySelect = document.getElementById("filterCategory");
    var filterAvailabilitySelect = document.getElementById("filterAvailability");
    var clearFilterBtn = document.getElementById("clearFilterBtn");

    // Add Fleet
    addFleetBtn.addEventListener("click", function () {
      var regNo = regNoInput.value.trim();
      var category = categorySelect.value;
      var driverName = driverNameInput.value.trim();
      var availabilityValue = availabilitySelect.value;

      if (regNo === "" || category === "" || driverName === "" || availabilityValue === "") {
        alert("Please fill all fields properly before adding."); // validation using alert [web:19]
        return;
      }

      var isAvailable = availabilityValue === "Available";

      var vehicle = {
        id: nextId++,
        regNo: regNo,
        category: category,
        driverName: driverName,
        isAvailable: isAvailable
      };

      vehicles.push(vehicle);

      // Clear form
      regNoInput.value = "";
      categorySelect.value = "";
      driverNameInput.value = "";
      availabilitySelect.value = "";

      renderCards();
    });

    // Render cards with filters
    function renderCards() {
      cardsContainer.innerHTML = "";

      var filtered = vehicles.filter(function (v) {
        var categoryMatch =
          currentCategoryFilter === "All" || v.category === currentCategoryFilter;

        var availabilityMatch = true;
        if (currentAvailabilityFilter === "Available") {
          availabilityMatch = v.isAvailable === true;
        } else if (currentAvailabilityFilter === "Unavailable") {
          availabilityMatch = v.isAvailable === false;
        }

        return categoryMatch && availabilityMatch;
      });

      filtered.forEach(function (vehicle) {
        var card = document.createElement("div");
        card.className = "card";

        var img = document.createElement("img");
        img.src = "https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png";

        var title = document.createElement("h3");
        title.textContent = vehicle.regNo;

        var categoryP = document.createElement("p");
        categoryP.textContent = "Category: " + vehicle.category;

        var driverP = document.createElement("p");
        driverP.textContent = "Driver: " + vehicle.driverName;

        var statusP = document.createElement("p");
        statusP.textContent = vehicle.isAvailable ? "Available" : "Unavailable";
        statusP.className = vehicle.isAvailable ? "status-available" : "status-unavailable";

        var updateBtn = document.createElement("button");
        updateBtn.textContent = "Update Driver";
        updateBtn.className = "btn-update";

        var availabilityBtn = document.createElement("button");
        availabilityBtn.textContent = "Change Availability";
        availabilityBtn.className = "btn-availability";

        var deleteBtn = document.createElement("button");
        deleteBtn.textContent = "Delete Vehicle";
        deleteBtn.className = "btn-delete";

        // Update Driver handler
        updateBtn.addEventListener("click", function () {
          var newName = prompt("Enter new driver name:"); // prompt dialog for input [web:17]
          if (newName === null) {
            return;
          }
          newName = newName.trim();
          if (newName.length === 0) {
            alert("Driver name cannot be empty."); // validation on empty prompt result [web:19]
            return;
          }
          vehicle.driverName = newName;
          renderCards();
        });

        // Change Availability handler
        availabilityBtn.addEventListener("click", function () {
          vehicle.isAvailable = !vehicle.isAvailable;
          renderCards();
        });

        // Delete Vehicle handler
        deleteBtn.addEventListener("click", function () {
          var shouldDelete = confirm("Are you sure you want to delete this vehicle?"); // confirm dialog returning boolean [web:16][web:20]
          if (!shouldDelete) {
            return;
          }
          vehicles = vehicles.filter(function (v) {
            return v.id !== vehicle.id;
          });
          renderCards();
        });

        card.appendChild(img);
        card.appendChild(title);
        card.appendChild(categoryP);
        card.appendChild(driverP);
        card.appendChild(statusP);
        card.appendChild(updateBtn);
        card.appendChild(availabilityBtn);
        card.appendChild(deleteBtn);

        cardsContainer.appendChild(card);
      });
    }

    // Filters
    filterCategorySelect.addEventListener("change", function () {
      currentCategoryFilter = filterCategorySelect.value;
      renderCards();
    });

    filterAvailabilitySelect.addEventListener("change", function () {
      currentAvailabilityFilter = filterAvailabilitySelect.value;
      renderCards();
    });

    clearFilterBtn.addEventListener("click", function () {
      currentCategoryFilter = "All";
      currentAvailabilityFilter = "All";
      filterCategorySelect.value = "All";
      filterAvailabilitySelect.value = "All";
      renderCards();
    });
  </script>
</body>
</html>
